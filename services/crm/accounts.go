// Copyright 2018 The go-exactonline AUTHORS. All rights reserved.
//
// Use of this source code is governed by a MIT
// license that can be found in the LICENSE file.
// Code generated by gen-services.go; DO NOT EDIT.
package crm

import (
	"context"
	"encoding/json"
	"fmt"
	"io/ioutil"
	"net/http"

	"github.com/stack11/go-exactonline/api"
	"github.com/stack11/go-exactonline/types"
)

// AccountsEndpoint is responsible for communicating with
// the Accounts endpoint of the CRM service.
type AccountsEndpoint service

// Accounts:
// Service: CRM
// Entity: Accounts
// URL: /api/v1/{division}/crm/Accounts
// HasWebhook: true
// IsInBeta: false
// Methods: GET POST PUT DELETE
// Endpoint docs: https://start.exactonline.nl/docs/HlpRestAPIResourcesDetails.aspx?name=CRMAccounts
type Accounts struct {
	MetaData *api.MetaData `json:"__metadata,omitempty"`
	// ID:
	ID *types.GUID `json:"ID,omitempty"`

	// Accountant:
	Accountant *types.GUID `json:"Accountant,omitempty"`

	// AccountManager:
	AccountManager *types.GUID `json:"AccountManager,omitempty"`

	// AccountManagerFullName:
	AccountManagerFullName *string `json:"AccountManagerFullName,omitempty"`

	// AccountManagerHID:
	AccountManagerHID *int `json:"AccountManagerHID,omitempty"`

	// ActivitySector:
	ActivitySector *types.GUID `json:"ActivitySector,omitempty"`

	// ActivitySubSector:
	ActivitySubSector *types.GUID `json:"ActivitySubSector,omitempty"`

	// AddressLine1:
	AddressLine1 *string `json:"AddressLine1,omitempty"`

	// AddressLine2:
	AddressLine2 *string `json:"AddressLine2,omitempty"`

	// AddressLine3:
	AddressLine3 *string `json:"AddressLine3,omitempty"`

	// BankAccounts:
	BankAccounts *json.RawMessage `json:"BankAccounts,omitempty"`

	// Blocked:
	Blocked *bool `json:"Blocked,omitempty"`

	// BRIN:
	BRIN *types.GUID `json:"BRIN,omitempty"`

	// BusinessType:
	BusinessType *types.GUID `json:"BusinessType,omitempty"`

	// CanDropShip:
	CanDropShip *bool `json:"CanDropShip,omitempty"`

	// ChamberOfCommerce:
	ChamberOfCommerce *string `json:"ChamberOfCommerce,omitempty"`

	// City:
	City *string `json:"City,omitempty"`

	// Classification:
	Classification *string `json:"Classification,omitempty"`

	// Classification1:
	Classification1 *types.GUID `json:"Classification1,omitempty"`

	// Classification2:
	Classification2 *types.GUID `json:"Classification2,omitempty"`

	// Classification3:
	Classification3 *types.GUID `json:"Classification3,omitempty"`

	// Classification4:
	Classification4 *types.GUID `json:"Classification4,omitempty"`

	// Classification5:
	Classification5 *types.GUID `json:"Classification5,omitempty"`

	// Classification6:
	Classification6 *types.GUID `json:"Classification6,omitempty"`

	// Classification7:
	Classification7 *types.GUID `json:"Classification7,omitempty"`

	// Classification8:
	Classification8 *types.GUID `json:"Classification8,omitempty"`

	// ClassificationDescription:
	ClassificationDescription *string `json:"ClassificationDescription,omitempty"`

	// Code:
	Code *string `json:"Code,omitempty"`

	// CodeAtSupplier:
	CodeAtSupplier *string `json:"CodeAtSupplier,omitempty"`

	// CompanySize:
	CompanySize *types.GUID `json:"CompanySize,omitempty"`

	// ConsolidationScenario:
	ConsolidationScenario *byte `json:"ConsolidationScenario,omitempty"`

	// ControlledDate:
	ControlledDate *types.Date `json:"ControlledDate,omitempty"`

	// Costcenter:
	Costcenter *string `json:"Costcenter,omitempty"`

	// CostcenterDescription:
	CostcenterDescription *string `json:"CostcenterDescription,omitempty"`

	// CostPaid:
	CostPaid *byte `json:"CostPaid,omitempty"`

	// Country:
	Country *string `json:"Country,omitempty"`

	// CountryName:
	CountryName *string `json:"CountryName,omitempty"`

	// Created:
	Created *types.Date `json:"Created,omitempty"`

	// Creator:
	Creator *types.GUID `json:"Creator,omitempty"`

	// CreatorFullName:
	CreatorFullName *string `json:"CreatorFullName,omitempty"`

	// CreditLinePurchase:
	CreditLinePurchase *float64 `json:"CreditLinePurchase,omitempty"`

	// CreditLineSales:
	CreditLineSales *float64 `json:"CreditLineSales,omitempty"`

	// Currency:
	Currency *string `json:"Currency,omitempty"`

	// CustomerSince:
	CustomerSince *types.Date `json:"CustomerSince,omitempty"`

	// DatevCreditorCode:
	DatevCreditorCode *string `json:"DatevCreditorCode,omitempty"`

	// DatevDebtorCode:
	DatevDebtorCode *string `json:"DatevDebtorCode,omitempty"`

	// DiscountPurchase:
	DiscountPurchase *float64 `json:"DiscountPurchase,omitempty"`

	// DiscountSales:
	DiscountSales *float64 `json:"DiscountSales,omitempty"`

	// Division:
	Division *int `json:"Division,omitempty"`

	// Document:
	Document *types.GUID `json:"Document,omitempty"`

	// DunsNumber:
	DunsNumber *string `json:"DunsNumber,omitempty"`

	// Email:
	Email *string `json:"Email,omitempty"`

	// EndDate:
	EndDate *types.Date `json:"EndDate,omitempty"`

	// EstablishedDate:
	EstablishedDate *types.Date `json:"EstablishedDate,omitempty"`

	// Fax:
	Fax *string `json:"Fax,omitempty"`

	// GLAccountPurchase:
	GLAccountPurchase *types.GUID `json:"GLAccountPurchase,omitempty"`

	// GLAccountSales:
	GLAccountSales *types.GUID `json:"GLAccountSales,omitempty"`

	// GLAP:
	GLAP *types.GUID `json:"GLAP,omitempty"`

	// GLAR:
	GLAR *types.GUID `json:"GLAR,omitempty"`

	// HasWithholdingTaxSales:
	HasWithholdingTaxSales *bool `json:"HasWithholdingTaxSales,omitempty"`

	// IgnoreDatevWarningMessage:
	IgnoreDatevWarningMessage *bool `json:"IgnoreDatevWarningMessage,omitempty"`

	// IntraStatArea:
	IntraStatArea *string `json:"IntraStatArea,omitempty"`

	// IntraStatDeliveryTerm:
	IntraStatDeliveryTerm *string `json:"IntraStatDeliveryTerm,omitempty"`

	// IntraStatSystem:
	IntraStatSystem *string `json:"IntraStatSystem,omitempty"`

	// IntraStatTransactionA:
	IntraStatTransactionA *string `json:"IntraStatTransactionA,omitempty"`

	// IntraStatTransactionB:
	IntraStatTransactionB *string `json:"IntraStatTransactionB,omitempty"`

	// IntraStatTransportMethod:
	IntraStatTransportMethod *string `json:"IntraStatTransportMethod,omitempty"`

	// InvoiceAccount:
	InvoiceAccount *types.GUID `json:"InvoiceAccount,omitempty"`

	// InvoiceAccountCode:
	InvoiceAccountCode *string `json:"InvoiceAccountCode,omitempty"`

	// InvoiceAccountName:
	InvoiceAccountName *string `json:"InvoiceAccountName,omitempty"`

	// InvoiceAttachmentType:
	InvoiceAttachmentType *int `json:"InvoiceAttachmentType,omitempty"`

	// InvoicingMethod:
	InvoicingMethod *int `json:"InvoicingMethod,omitempty"`

	// IsAccountant:
	IsAccountant *byte `json:"IsAccountant,omitempty"`

	// IsAgency:
	IsAgency *byte `json:"IsAgency,omitempty"`

	// IsAnonymised:
	IsAnonymised *byte `json:"IsAnonymised,omitempty"`

	// IsBank:
	IsBank *bool `json:"IsBank,omitempty"`

	// IsCompetitor:
	IsCompetitor *byte `json:"IsCompetitor,omitempty"`

	// IsExtraDuty:
	IsExtraDuty *bool `json:"IsExtraDuty,omitempty"`

	// IsMailing:
	IsMailing *byte `json:"IsMailing,omitempty"`

	// IsMember:
	IsMember *bool `json:"IsMember,omitempty"`

	// IsPilot:
	IsPilot *bool `json:"IsPilot,omitempty"`

	// IsPurchase:
	IsPurchase *bool `json:"IsPurchase,omitempty"`

	// IsReseller:
	IsReseller *bool `json:"IsReseller,omitempty"`

	// IsSales:
	IsSales *bool `json:"IsSales,omitempty"`

	// IsSupplier:
	IsSupplier *bool `json:"IsSupplier,omitempty"`

	// Language:
	Language *string `json:"Language,omitempty"`

	// LanguageDescription:
	LanguageDescription *string `json:"LanguageDescription,omitempty"`

	// Latitude:
	Latitude *float64 `json:"Latitude,omitempty"`

	// LeadPurpose:
	LeadPurpose *types.GUID `json:"LeadPurpose,omitempty"`

	// LeadSource:
	LeadSource *types.GUID `json:"LeadSource,omitempty"`

	// Logo:
	Logo *[]byte `json:"Logo,omitempty"`

	// LogoFileName:
	LogoFileName *string `json:"LogoFileName,omitempty"`

	// LogoThumbnailUrl:
	LogoThumbnailUrl *string `json:"LogoThumbnailUrl,omitempty"`

	// LogoUrl:
	LogoUrl *string `json:"LogoUrl,omitempty"`

	// Longitude:
	Longitude *float64 `json:"Longitude,omitempty"`

	// MainContact:
	MainContact *types.GUID `json:"MainContact,omitempty"`

	// Modified:
	Modified *types.Date `json:"Modified,omitempty"`

	// Modifier:
	Modifier *types.GUID `json:"Modifier,omitempty"`

	// ModifierFullName:
	ModifierFullName *string `json:"ModifierFullName,omitempty"`

	// Name:
	Name *string `json:"Name,omitempty"`

	// OINNumber:
	OINNumber *string `json:"OINNumber,omitempty"`

	// Parent:
	Parent *types.GUID `json:"Parent,omitempty"`

	// PayAsYouEarn:
	PayAsYouEarn *string `json:"PayAsYouEarn,omitempty"`

	// PaymentConditionPurchase:
	PaymentConditionPurchase *string `json:"PaymentConditionPurchase,omitempty"`

	// PaymentConditionPurchaseDescription:
	PaymentConditionPurchaseDescription *string `json:"PaymentConditionPurchaseDescription,omitempty"`

	// PaymentConditionSales:
	PaymentConditionSales *string `json:"PaymentConditionSales,omitempty"`

	// PaymentConditionSalesDescription:
	PaymentConditionSalesDescription *string `json:"PaymentConditionSalesDescription,omitempty"`

	// Phone:
	Phone *string `json:"Phone,omitempty"`

	// PhoneExtension:
	PhoneExtension *string `json:"PhoneExtension,omitempty"`

	// Postcode:
	Postcode *string `json:"Postcode,omitempty"`

	// PriceList:
	PriceList *types.GUID `json:"PriceList,omitempty"`

	// PurchaseCurrency:
	PurchaseCurrency *string `json:"PurchaseCurrency,omitempty"`

	// PurchaseCurrencyDescription:
	PurchaseCurrencyDescription *string `json:"PurchaseCurrencyDescription,omitempty"`

	// PurchaseLeadDays:
	PurchaseLeadDays *int `json:"PurchaseLeadDays,omitempty"`

	// PurchaseVATCode:
	PurchaseVATCode *string `json:"PurchaseVATCode,omitempty"`

	// PurchaseVATCodeDescription:
	PurchaseVATCodeDescription *string `json:"PurchaseVATCodeDescription,omitempty"`

	// RecepientOfCommissions:
	RecepientOfCommissions *bool `json:"RecepientOfCommissions,omitempty"`

	// Remarks:
	Remarks *string `json:"Remarks,omitempty"`

	// Reseller:
	Reseller *types.GUID `json:"Reseller,omitempty"`

	// ResellerCode:
	ResellerCode *string `json:"ResellerCode,omitempty"`

	// ResellerName:
	ResellerName *string `json:"ResellerName,omitempty"`

	// RSIN:
	RSIN *string `json:"RSIN,omitempty"`

	// SalesCurrency:
	SalesCurrency *string `json:"SalesCurrency,omitempty"`

	// SalesCurrencyDescription:
	SalesCurrencyDescription *string `json:"SalesCurrencyDescription,omitempty"`

	// SalesTaxSchedule:
	SalesTaxSchedule *types.GUID `json:"SalesTaxSchedule,omitempty"`

	// SalesTaxScheduleCode:
	SalesTaxScheduleCode *string `json:"SalesTaxScheduleCode,omitempty"`

	// SalesTaxScheduleDescription:
	SalesTaxScheduleDescription *string `json:"SalesTaxScheduleDescription,omitempty"`

	// SalesVATCode:
	SalesVATCode *string `json:"SalesVATCode,omitempty"`

	// SalesVATCodeDescription:
	SalesVATCodeDescription *string `json:"SalesVATCodeDescription,omitempty"`

	// SearchCode:
	SearchCode *string `json:"SearchCode,omitempty"`

	// SecurityLevel:
	SecurityLevel *int `json:"SecurityLevel,omitempty"`

	// SeparateInvPerProject:
	SeparateInvPerProject *byte `json:"SeparateInvPerProject,omitempty"`

	// SeparateInvPerSubscription:
	SeparateInvPerSubscription *byte `json:"SeparateInvPerSubscription,omitempty"`

	// ShippingLeadDays:
	ShippingLeadDays *int `json:"ShippingLeadDays,omitempty"`

	// ShippingMethod:
	ShippingMethod *types.GUID `json:"ShippingMethod,omitempty"`

	// StartDate:
	StartDate *types.Date `json:"StartDate,omitempty"`

	// State:
	State *string `json:"State,omitempty"`

	// StateName:
	StateName *string `json:"StateName,omitempty"`

	// Status:
	Status *string `json:"Status,omitempty"`

	// StatusSince:
	StatusSince *types.Date `json:"StatusSince,omitempty"`

	// TradeName:
	TradeName *string `json:"TradeName,omitempty"`

	// Type:
	Type *string `json:"Type,omitempty"`

	// UniqueTaxpayerReference:
	UniqueTaxpayerReference *string `json:"UniqueTaxpayerReference,omitempty"`

	// VATLiability:
	VATLiability *string `json:"VATLiability,omitempty"`

	// VATNumber:
	VATNumber *string `json:"VATNumber,omitempty"`

	// Website:
	Website *string `json:"Website,omitempty"`
}

func (e *Accounts) GetPrimary() *types.GUID {
	return e.ID
}

func (s *AccountsEndpoint) UserHasRights(ctx context.Context, division int, method string) (bool, error) {
	return s.client.UserHasRights(ctx, division, "crm/Accounts", method)
}

// List the Accounts entities in the provided division.
// If all is true, all the paginated results are fetched; if false, list the first page.
func (s *AccountsEndpoint) List(ctx context.Context, division int, all bool, o *api.ListOptions) ([]*Accounts, error) {
	var entities []*Accounts
	u, _ := s.client.ResolvePathWithDivision("/api/v1/{division}/crm/Accounts", division) // #nosec
	api.AddListOptionsToURL(u, o)

	if all {
		err := s.client.ListRequestAndDoAll(ctx, u.String(), &entities)
		return entities, err
	}
	_, _, err := s.client.NewRequestAndDo(ctx, "GET", u.String(), nil, &entities)
	return entities, err
}

// Get the Accounts entitiy in the provided division.
func (s *AccountsEndpoint) Get(ctx context.Context, division int, id *types.GUID) (*Accounts, error) {
	b, _ := s.client.ResolvePathWithDivision("/api/v1/{division}/crm/Accounts", division) // #nosec
	u, err := api.AddOdataKeyToURL(b, id)
	if err != nil {
		return nil, err
	}

	e := &Accounts{}
	_, _, requestError := s.client.NewRequestAndDo(ctx, "GET", u.String(), nil, e)
	return e, requestError
}

// New returns an empty Accounts entity
func (s *AccountsEndpoint) New() *Accounts {
	return &Accounts{}
}

// Create the Accounts entity in the provided division.
func (s *AccountsEndpoint) Create(ctx context.Context, division int, entity *Accounts) (*Accounts, error) {
	u, _ := s.client.ResolvePathWithDivision("/api/v1/{division}/crm/Accounts", division) // #nosec
	e := &Accounts{}
	_, _, err := s.client.NewRequestAndDo(ctx, "POST", u.String(), entity, e)
	if err != nil {
		return nil, err
	}
	return e, nil
}

// Update the Accounts entity in the provided division.
func (s *AccountsEndpoint) Update(ctx context.Context, division int, entity *Accounts) (*Accounts, error) {
	b, _ := s.client.ResolvePathWithDivision("/api/v1/{division}/crm/Accounts", division) // #nosec
	u, err := api.AddOdataKeyToURL(b, entity.GetPrimary())
	if err != nil {
		return nil, err
	}

	e := &Accounts{}
	_, _, requestError := s.client.NewRequestAndDo(ctx, "PUT", u.String(), entity, e)
	return e, requestError
}

// Delete the Accounts entity in the provided division.
func (s *AccountsEndpoint) Delete(ctx context.Context, division int, id *types.GUID) error {
	b, _ := s.client.ResolvePathWithDivision("/api/v1/{division}/crm/Accounts", division) // #nosec
	u, err := api.AddOdataKeyToURL(b, id)
	if err != nil {
		return err
	}

	_, r, requestError := s.client.NewRequestAndDo(ctx, "DELETE", u.String(), nil, nil)
	if requestError != nil {
		return requestError
	}

	if r.StatusCode != http.StatusNoContent {
		body, _ := ioutil.ReadAll(r.Body) // #nosec
		return fmt.Errorf("Failed with status %v and body %v", r.StatusCode, body)
	}

	return nil
}
